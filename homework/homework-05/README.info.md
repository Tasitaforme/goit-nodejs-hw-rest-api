# –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

HTML —Ñ–æ—Ä–º–∞, –Ω–∞–¥—ñ—Å–ª–∞–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±—Ä–∞—É–∑–µ—Ä–æ–º, –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –∑–∞–∫–æ–¥–æ–≤–∞–Ω–∞.  
–Ø–∫—â–æ –º–∏ –Ω–µ –≤–∫–∞–∑—É—î–º–æ –º–µ—Ç–æ–¥ –∫–æ–¥—É–≤–∞–Ω–Ω—è, —Ç–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
`application/x-www-form-urlencoded`.  
–î–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ —Ç–∏–ø –∫–æ–¥—É–≤–∞–Ω–Ω—è
`multipart/form-data`.  
–ü–∞–∫–µ—Ç–∏ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
[Multer](https://github.com/expressjs/multer) —Ç–∞
[Formidable](https://github.com/node-formidable/formidable).

[FormData (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è)](https://developer.mozilla.org/en-US/docs/Web/API/FormData/FormData#prepopulating_from_a_html_form_element)

## Multer

Multer ‚Äî —Ü–µ –ø—Ä–æ–º—ñ–∂–Ω–µ –ü–ó (middleware) —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Express, —è–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
–ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ `multipart/form-data`. –ü–æ —Å—É—Ç—ñ —î –æ–±–≥–æ—Ä—Ç–∫–æ—é
–Ω–∞–¥ –Ω–∏–∑—å–∫–æ—Ä—ñ–≤–Ω–µ–≤–∏–º –ø–∞–∫–µ—Ç–æ–º [busboy](https://github.com/mscdex/busboy), —â–æ
–¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

```shell
npm install -S multer
```

Multer –¥–æ–¥–∞—î –æ–±'—î–∫—Ç body —Ç–∞ –æ–±'—î–∫—Ç file (–∞–±–æ files) –≤—Å–µ—Ä–µ–¥–∏–Ω—É –æ–±'—î–∫—Ç–∞ request.
–û–±'—î–∫—Ç body –º—ñ—Å—Ç–∏—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ —Ñ–æ—Ä–º–∏, –æ–±'—î–∫—Ç file (files) –º—ñ—Å—Ç–∏—Ç—å
—Ñ–∞–π–ª –∞–±–æ —Ñ–∞–π–ª–∏, —â–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É.

–ü–∞–∫–µ—Ç –Ω–∞–¥–∞—î –Ω–∞—Å—Ç—É–ø–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —â–æ–¥–æ –∫–æ–∂–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É:

| –ö–ª—é—á                  | –û–ø–∏—Å                                          |    –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ    |
| :-------------------- | :-------------------------------------------- | :-------------: |
| `fieldname`           | Field name specified in the form              |        ‚Äî        |
| `originalname`        | Name of the file on the user's computer       |        ‚Äî        |
| `encoding`            | Encoding type of the file                     |        ‚Äî        |
| `mimetype`            | Mime type of the file                         |        ‚Äî        |
| `size`                | Size of the file in bytes                     |        ‚Äî        |
| `destination or dest` | The folder to which the file has been saved   |  `DiskStorage`  |
| `filename`            | The name of the file within the `destination` |  `DiskStorage`  |
| `path`                | The full path to the uploaded file            |  `DiskStorage`  |
| `buffer`              | A `Buffer` of the entire file                 | `MemoryStorage` |

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å DiskStorage:

```js
//middlewares/upload.js
const multer = require("multer");
const path = require("path");

const tempDir = path.join(__dirname, "../", "tmp");

const multerConfig = multer.diskStorage({
  // —à–ª—è—Ö –¥–æ —Ç–∏–º—á–∞—Å–æ–≤–æ—ó –ø–∞–ø–∫–∏, –¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º—É—Ç—å—Å—è —Ñ–∞–π–ª–∏
  destination: (req, file, cb) => {
    cb(null, tempDir);
  },
  filename: (req, file, cb) => {
    // file.originalname - –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—É –ø—ñ–¥ —Ç–∏–º —ñ–º'—è–º, —è–∫–µ –Ω–∞–º –ø—Ä–∏–π—à–ª–æ
    cb(null, file.originalname);
  },
  // limits - –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É –≤ 1 –ú–±–∞–π—Ç
  limits: {
    fileSize: 1048576,
  },
});
```

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä—É multer:

```js
const upload = multer({
  storage: multerConfig,
});
```

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–º—ñ–∂–Ω–æ–≥–æ –ü–ó:

```js
// —è–∫—â–æ –º–∏ –æ—á—ñ–∫—É—î–º–æ –≤ –ø–æ–ª—ñ picture –æ–¥–∏–Ω —Ñ–∞–π–ª, –∞ –≤—Å—ñ —ñ–Ω—à—ñ –ø–æ–ª—è –±—É–¥—É—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–∏–º–∏
upload.single("picture");
// —è–∫—â–æ –º–∏ –æ—á—ñ–∫—É—î–º–æ –≤ –ø–æ–ª—ñ picture –∫—ñ–ª—å–∫–∞ —Ñ–∞–π–ª—ñ–≤ (max - 7), –∞ –≤—Å—ñ —ñ–Ω—à—ñ –ø–æ–ª—è –±—É–¥—É—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–∏–º–∏
upload.array("picture", 7);
// —è–∫—â–æ –º–∏ –æ—á—ñ–∫—É—î–º–æ –≤ —Ä—ñ–∑–Ω–∏—Ö –ø–æ–ª—è—Ö —Ñ–∞–π–ª–∏
upload.fields([
  { name: "cover", maxCount: 1 },
  { name: "subcover", maxCount: 2 },
]);
```

```js
app.post("/api/books", upload.single("cover"), async (req, res) => {
  console.log(req.body);
  console.log(req.file);
  //...controller uploadBook
});
```

> –í–µ–±-—Å–µ—Ä–≤–µ—Ä–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ñ–∞–π–ª–∏ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å, —â–æ–± —Ü–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏, –ø–æ—Ç—Ä—ñ–±–Ω–æ
> –Ω–∞–ø–∏—Å–∞—Ç–∏ –æ–∫—Ä–µ–º—É middleware:
>
> ```js
> // –∑–∞–ø–∏—Å –æ–∑–Ω–∞—á–∞—î, —â–æ —è–∫—â–æ –ø—Ä–∏–π–¥–µ –∑–∞–ø–∏—Ç –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Ñ–∞–π–ª - >—Ç—Ä–µ–±–∞ –π–æ–≥–æ —à—É–∫–∞—Ç–∏ –≤ –ø–∞–ø—Ü—ñ public
> app.use(express.static("public"));
> ```

### –¢–∏–º—á–∞—Å–æ–≤–∞ –∞–≤–∞—Ç–∞—Ä–∫–∞ (–∑–∞–≥–ª—É—à–∫–∞)

–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ—ó –∞–≤–∞—Ç–∞—Ä–∫–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏:  
[Gravatar](https://ru.gravatar.com/) üëâ
[npm-–ø–∞–∫–µ—Ç](https://www.npmjs.com/package/gravatar)

```shell
npm i gravatar
```

```js
const gravatar = require("gravatar");
const avatarURL = gravatar.url(email);
```

### JavaScript Image Manipulation Program (Jimp)

[Jimp](https://www.npmjs.com/package/jimp) ‚Äî an image processing library for
Node written entirely in JavaScript, with zero native dependencies.  
**Supported types:** .jpeg, .png, .bmp, .tiff, .gif.

```shell
npm i jimp
```

```js
const Jimp = require("jimp");
// open a file called "lenna.png"
Jimp.read("lenna.png", (err, lenna) => {
  if (err) throw err;
  lenna
    .resize(256, 256) // resize
    .quality(60) // set JPEG quality
    .greyscale() // set greyscale
    .write("lena-small-bw.jpg"); // save
});
```

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–†–æ–±–æ—Ç–∞ QA:

1. –ú–∞–Ω—É–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (mokey.job)

- –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ –º–æ–∂–ª–∏–≤—ñ flow;
- –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞ –≤—Å—ñ—Ö –º–æ–∂–ª–∏–≤–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö;
- –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ –º–æ–∂–ª–∏–≤—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó, –Ω–∞–≤—ñ—Ç—å –Ω–µ –∑–∞–∑–Ω–∞—á–µ–Ω—ñ –≤ flow;

2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
3. –ù–∞–ø–∏—Å–∞–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤
4. –ó–≤—ñ—Ç –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

–ó–∞ –ø—ñ–¥—Ö–æ–¥–æ–º –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Ç–µ—Å—Ç–∏ –ø–æ–¥—ñ–ª—è—é—Ç—å—Å—è –Ω–∞ –¥–≤–∞ —Ç–∏–ø–∏:

- **Code first** ‚Äî —Å–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ä–æ–∑—Ä–æ–±–∫–∞, –∞ –ø–æ—Ç—ñ–º –≤–∂–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.
- **Test first** ‚Äî –¥–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –ø–∏—à–µ—Ç—å—Å—è —Ç–µ—Å—Ç –Ω–∞
  –º–∞–π–±—É—Ç–Ω—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å. –Ü –ª–∏—à–µ –ø—ñ—Å–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–µ—Å—Ç—ñ–≤ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç—å –¥–æ
  —Ä–æ–∑—Ä–æ–±–∫–∏.

–ú–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—á–Ω–æ —Ç–µ—Å—Ç–∏ –¥—ñ–ª—è—Ç—å –Ω–∞ –¥–≤–∞ –≤–∏–¥–∏:

- **TDD** ‚Äì —Ä–æ–∑—Ä–æ–±–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (Test-Driven Development)
- **BDD** ‚Äì —Ä–æ–∑—Ä–æ–±–∫–∞ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ (Behavior-Driven Development).

[–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ deepMerge (TS+TDD) (–≤—ñ–¥–µ–æ)](https://youtu.be/1qtaVMIfqTQ)

### –¢–µ—Å—Ç–æ–≤–∞ –ø—ñ—Ä–∞–º—ñ–¥–∞:

**–ù–∏–∂–Ω—è —á–∞—Å—Ç–∏–Ω–∞ ‚Äî –º–æ–¥—É–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏** (unit tests) –í–æ–Ω–∏ –Ω–∞–ø–∏—Å–∞–Ω—ñ –∑–¥–µ–±—ñ–ª—å—à–æ–≥–æ
—Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º–∏ —Ç–∞ –æ—Ö–æ–ø–ª—é—é—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, —Ç–∞–∫—ñ —è–∫ –∫–ª–∞—Å–∏, –º–µ—Ç–æ–¥–∏ —Ç–∞
—Ñ—É–Ω–∫—Ü—ñ—ó.  
–¶–µ —Ç–µ—Å—Ç–∏ –æ–¥–Ω–æ–≥–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É (–≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ - –æ–¥–∏–Ω —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç).  
–ó–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –¥—É–∂–µ —á–∞—Å—Ç–æ, –ø—Ä–∞—Ü—é—é—Ç—å —à–≤–∏–¥–∫–æ —Ç–∞ —ó—Ö –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤ —Ä–∞–º–∫–∞—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
–≤–µ–ª–∏–∫–∞.

**–°–µ—Ä–µ–¥–Ω—è —á–∞—Å—Ç–∏–Ω–∞ ‚Äî —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –∞–±–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ–π** (service/API
layer tests). –¶–µ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –Ω–µ –∑–ª–∞–º–∞–≤ –Ω–æ–≤–∏–π —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –∫–æ–¥
–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É. –¶–µ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —è–∫—ñ –æ—Ö–æ–ø–ª—é—é—Ç—å —Å–∫–ª–∞–¥–Ω—ñ—à—ñ —Ñ—É–Ω–∫—Ü—ñ—ó, —Ç–∞–∫—ñ —è–∫ —Ç–µ—Å—Ç–∏ API.  
–†—ñ–¥–∫–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø—ñ–¥ —á–∞—Å —Ä–µ–ª—ñ–∑—ñ–≤ —Ç–∞ –º–µ—Ä–¥–∂—ñ–≤ –≥—ñ–ª–æ–∫.

**–í–µ—Ä—Ö–Ω—è —á–∞—Å—Ç–∏–Ω–∞ ‚Äî —Ç–µ—Å—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —ñ —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** (user
interface tests). –ó–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è –≤–æ–Ω–∏ —Ä—ñ–¥–∫–æ —Ç–∞ –ø—Ä–∞—Ü—é—é—Ç—å –ø–æ–≤—ñ–ª—å–Ω–æ.

## –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ï—Ç–∞–ø–∏ –ø—Ä–æ—Ü–µ—Å—É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–∞–∫–µ—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è ![test](./test.png)

[Jest](https://jestjs.io/ru/)  
[Mocha](https://mochajs.org/)  
[Jasmine](https://jasmine.github.io/)  
[Ava](https://github.com/avajs/ava)  
[Sinon](https://sinonjs.org/)  
[Testdouble](https://github.com/testdouble/testdouble.js/)  
[Chai](https://www.chaijs.com/)  
[Shouldjs](https://shouldjs.github.io/)  
[Istanbul](https://istanbul.js.org/)  
[Blanket.js](https://github.com/alex-seville/blanket) üëâ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –≤–∂–µ
–∞–∫—Ç–∏–≤–Ω–æ

### Jest

[Jest](https://jestjs.io/) ‚Äî —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞, –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ
—ñ–Ω—à–æ—ó –ø–æ–ø—É–ª—è—Ä–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è Jasmine. –†–æ–∑—Ä–æ–±–∫–æ—é Jest –∑–∞–π–º–∞—î—Ç—å—Å—è
Facebook, —ñ Jest —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ä–∞–∑–æ–º –∑ React.

[–Ü–º—ñ—Ç–∞—Ü—ñ—è –º–æ–¥—É–ª—ñ–≤](https://jestjs.io/docs/mock-functions)

–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –æ–¥–Ω—ñ –π —Ç—ñ —Å–∞–º—ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
–¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–µ—Å—Ç—ñ–≤ —Ç–∞ —ó—Ö –Ω–∞–±–æ—Ä—ñ–≤.

**–ö–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:**  
`describe` ‚Äì –Ω–∞–±—ñ—Ä –≥—Ä—É–ø–∏ —Ç–µ—Å—Ç—ñ–≤  
`test (–∞–±–æ it)` ‚Äì —Ç–µ—Å—Ç–æ–≤–∏–π –≤–∏–ø–∞–¥–æ–∫  
`beforeAll` ‚Äì –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º  
`beforeEach` ‚Äì –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –Ω–∞–±–æ—Ä—É –∞–±–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≤–∏–ø–∞–¥–∫—É  
`afterAll` ‚Äì –∑–∞–≤–µ—Ä—à–∞–ª—å–Ω—ñ –¥—ñ—ó –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è  
`afterEach` ‚Äì –∑–∞–≤–µ—Ä—à–∞–ª—å–Ω—ñ –¥—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –Ω–∞–±–æ—Ä—É –∞–±–æ –≤–∏–ø–∞–¥–∫—É

```shell
npm i jest -D
```

[@types/jest](https://www.npmjs.com/package/@types/jest) - p–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è
"—Ä–æ–∑—É–º–Ω–∏–π –∞–≤—Ç–æ–ø—ñ–¥–∫–∞–∑–æ–∫" –º–µ—Ç–æ–¥—ñ–≤ jest (–¥–ª—è VS Code)

```shell
npm i @types/jest -D
```

[SuperTest](https://www.npmjs.com/package/supertest) ‚Äî –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
HTTP-–∑–∞–ø–∏—Ç—ñ–≤.

```shell
npm i supertest -D
```

`"test": "jest"` ‚Äî –¥–∞–Ω–∏–π –∑–∞–ø–∏—Å –¥–∞—î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å jest —à—É–∫–∞—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç—ñ –≤—Å—ñ —Ñ–∞–π–ª–∏ –∑
—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º .test.js, –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ç–∞ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤ –Ω–∏—Ö –ø–æ—Ç—Ä—ñ–±–Ω—ñ
—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó):

```js
// package.json
"scripts": {
    "test": "jest"
    // —â–æ–± —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ –≤ real-time
    "test:watch": "jest --watch"
  },
```

> –ú–æ–∂–Ω–∞ —ñ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º `.test.js`. –¢–æ–¥—ñ —Å–ª—ñ–¥ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É
> `__tests__` —ñ –≤ –Ω—ñ–π –≤–∂–µ –º–æ–∂–Ω–∞ –±–µ–∑ "—Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è, –∞ –ø—Ä–æ—Å—Ç–æ `.js`.

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—É:

```shell
npm run test
# –∞–±–æ –¥–ª—è –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–Ω—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
# npm run test:watch
```

–£ Jest –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å BDD —ñ –≤ –æ—Å–Ω–æ–≤—ñ –ª–µ–∂–∏—Ç—å –º–æ–≤–∞ —Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è Expect.
–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ Expect, —è–∫—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—î Jest, —ñ–Ω—à—ñ –º–æ–∂–Ω–∞ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –≤
[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó](https://jestjs.io/docs/using-matchers).

`not` ‚Äî —ñ–Ω–≤–µ—Ä—Ç—É—î –Ω–∞—Å—Ç—É–ø–Ω–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤ –ª–∞–Ω—Ü—é–∂–∫—É.  
`expect(func(arg)).toBe(value)` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–≥—É —Ä—ñ–≤–Ω—ñ—Å—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ
–∑–Ω–∞—á–µ–Ω–Ω—è value  
`expect(func(arg)).toEqual(value)` ‚Äî –≥–ª–∏–±–æ–∫–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è, —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è, —â–æ
–ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è ‚Äì –æ–±'—î–∫—Ç  
`expect(func(arg)).toBeTruthy()` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞ —Ç–µ, —á–∏ –º–æ–∂–Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è,
—â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è, –≤–≤–∞–∂–∞—Ç–∏ —ñ—Å—Ç–∏–Ω–Ω–∏–º  
`expect(func(arg)).toBeNull()` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ—Å—Ç—å null.  
`expect(func(arg)).toBeUndefined()` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞ undefined  
`expect(func(arg)).toBeDefined()` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —â–æ —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–≤–µ—Ä—Ç–∞—î —â–æ—Å—å

–í expect() –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —Ç–µ—Å—Ç–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ–∞–∫—Ç–∏—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ,
–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º–µ—Ç–æ–¥–∏ Expect, –≤–æ–Ω–∞ –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è –∑ –æ—á—ñ–∫—É–≤–∞–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è, –∂–æ—Ä—Å—Ç–∫–æ
–∑–∞–¥–∞–Ω–∏–º —É —Ç–µ—Å—Ç–∞—Ö.

```js
const isLeapYear = require("./isLeapYear");

describe("test isLeapYear function", () => {
  test("2008 - true", () => {
    const result = isLeapYear(2008);
    expect(result).toBe(true);
    /*
        const expect = result => {
            return {
                result,
                toBe(value) {
                    return this.result === value;
                }
            }
        }
        */
  });
  test("2003 - false", () => {
    expect(isLeapYear(2003)).toBe(false);
  });

  it("1900 - false", () => {
    expect(isLeapYear(1900)).toBe(false);
  });
  // —è–∫—â–æ –º–∏ –æ—á—ñ–∫—É—î–º–æ, —â–æ —Ñ—É–Ω–∫—Ü—ñ—è –≤–∏–∫–∏–¥–∞—Ç–∏–º–µ –ø–æ–º–∏–ª–∫—É
  test("41 - error 'year must 42 or more'", () => {
    expect(() => isLeapYear(41)).toThrow("year must 42 or more");
  });
  test("true - error 'year must be number'", () => {
    expect(() => isLeapYear(true)).toThrow("year must be number");
  });
});
```

# –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

## –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–º—É —Å—Ö–æ–≤–∏—â—ñ

### Google drive

### Cloudinary

–§–∞–π–ª–∏ –º–æ–∂–Ω–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –Ω–∞:  
[Cloudinary](https://cloudinary.com/) üëâ
[npm](https://www.npmjs.com/package/cloudinary)

```shell
npm i cloudinary
```

> –ü–µ—Ä–µ–¥–∞—é—á–∏ —Ä—ñ–∑–Ω—ñ –ø—Ä–æ–øc–∏ –º–æ–∂–Ω–∞ –ø–æ-—Ä—ñ–∑–Ω–æ–º—É –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É (–ø–æ–≤–µ—Ä–Ω—É—Ç–∏, –¥–æ–¥–∞—Ç–∏
> —Ä–∞–º–∫—É...)

### Amazon S3

[Amazon S3](https://aws.amazon.com/ru/s3/)

### AWS SDK Node.js

[AWS SDK Node.js](https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/getting-started-nodejs.html)

```shell
npm i @aws-sdk/client-s3
```

## –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –Ω–∞ Docker —Ç–æ–º

[Docker](https://www.docker.com/)

[–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Docker (—Å—Ç–∞—Ç—å—è)](https://habr.com/ru/companies/slurm/articles/534334/)  
[–ò–∑—É—á–∞–µ–º Docker, —á–∞—Å—Ç—å 1: –æ—Å–Ω–æ–≤—ã (—Å—Ç–∞—Ç—å—è)](https://habr.com/ru/companies/ruvds/articles/438796/)  
[–ò–∑—É—á–µ–Ω–∏–µ Docker –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö (–≤–∏–¥–µ–æ)](https://www.youtube.com/playlist?list=PL0lO_mIqDDFX1c0JHogP5YuZdOVawoepS)

## Node.js Streams - –ø–æ—Ç–æ–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

[Node.js Streams - –ø–æ—Ç–æ–∫–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ (—Å—Ç–∞—Ç—Ç—è)](https://habr.com/ru/articles/479048/)

## –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –∑ –¥–∞—Ç–∞–º–∏

[moment](https://momentjs.com/)  
[Luxon](https://moment.github.io/luxon/#/)  
[Day.js](https://day.js.org/)  
[date-fns](https://date-fns.org/)  
[js-Joda](https://js-joda.github.io/js-joda/)
